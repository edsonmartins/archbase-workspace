import type { Ticket } from '../types';

const now = new Date();
const daysAgo = (d: number) => new Date(now.getTime() - d * 86400000).toISOString();
const hoursAgo = (h: number) => new Date(now.getTime() - h * 3600000).toISOString();

export const SEED_TICKETS: Ticket[] = [
  {
    id: 'tk-001', number: 1042, title: 'SSO login fails with SAML assertion error',
    description: 'Users on the Enterprise plan cannot authenticate via SSO. The SAML assertion validation fails with "Signature validation failed" when IdP is Okta. Reproduced with 3 different customer accounts. Standard username/password login works fine.',
    status: 'open', priority: 'critical', category: 'Bug',
    assignee: 'Alice', reporter: 'Dave',
    labels: ['auth', 'sso', 'enterprise'],
    createdAt: hoursAgo(4), updatedAt: hoursAgo(1), closedAt: null,
    comments: [
      { id: 'c1', author: 'Alice', content: 'Confirmed the issue. The certificate rotation from last week may have broken the validation chain. Investigating.', createdAt: hoursAgo(2), isInternal: false },
      { id: 'c2', author: 'Bob', content: 'Customer Acme Corp is escalating. They have 200+ users blocked.', createdAt: hoursAgo(1), isInternal: true },
    ],
    attachments: ['saml-trace.xml', 'error-screenshot.png'],
  },
  {
    id: 'tk-002', number: 1041, title: 'Add bulk import feature for contacts',
    description: 'Several enterprise customers have requested the ability to import contacts via CSV upload. Should support mapping columns, duplicate detection, and a preview before commit.',
    status: 'in_progress', priority: 'high', category: 'Feature Request',
    assignee: 'Carol', reporter: 'Eve',
    labels: ['contacts', 'import', 'enterprise'],
    createdAt: daysAgo(5), updatedAt: daysAgo(1), closedAt: null,
    comments: [
      { id: 'c3', author: 'Carol', content: 'CSV parser is done. Working on the column mapping UI now. ETA: 3 days.', createdAt: daysAgo(2), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-003', number: 1040, title: 'Dashboard loading time exceeds 10 seconds',
    description: 'The main analytics dashboard takes 10-15 seconds to load for accounts with more than 50k records. Profiling shows the aggregation queries are not using indexes properly.',
    status: 'in_progress', priority: 'high', category: 'Bug',
    assignee: 'Bob', reporter: 'Alice',
    labels: ['performance', 'dashboard', 'database'],
    createdAt: daysAgo(3), updatedAt: hoursAgo(6), closedAt: null,
    comments: [
      { id: 'c4', author: 'Bob', content: 'Added compound index on (account_id, created_at). Load time down to 3s. Testing with larger datasets.', createdAt: hoursAgo(6), isInternal: false },
    ],
    attachments: ['query-explain.txt'],
  },
  {
    id: 'tk-004', number: 1039, title: 'How to configure webhook retry policy?',
    description: 'Customer asks how to set up custom retry intervals for failed webhook deliveries. They want exponential backoff with a max of 5 retries.',
    status: 'waiting', priority: 'medium', category: 'Support',
    assignee: 'Dave', reporter: 'Eve',
    labels: ['webhooks', 'documentation'],
    createdAt: daysAgo(2), updatedAt: daysAgo(1), closedAt: null,
    comments: [
      { id: 'c5', author: 'Dave', content: 'Sent configuration guide to the customer. Waiting for confirmation that it resolved their issue.', createdAt: daysAgo(1), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-005', number: 1038, title: 'Implement role-based access control for reports',
    description: 'Need to restrict report visibility based on user roles. Admin sees all, Manager sees their team, Individual sees only their own. Applies to both the UI and the API endpoints.',
    status: 'open', priority: 'high', category: 'Feature Request',
    assignee: null, reporter: 'Carol',
    labels: ['rbac', 'reports', 'security'],
    createdAt: daysAgo(7), updatedAt: daysAgo(7), closedAt: null,
    comments: [],
    attachments: ['rbac-requirements.pdf'],
  },
  {
    id: 'tk-006', number: 1037, title: 'Email notifications sent twice for same event',
    description: 'Users report receiving duplicate email notifications when a ticket status changes. Appears to be a race condition in the event queue processor.',
    status: 'resolved', priority: 'medium', category: 'Bug',
    assignee: 'Alice', reporter: 'Bob',
    labels: ['notifications', 'email', 'race-condition'],
    createdAt: daysAgo(10), updatedAt: daysAgo(2), closedAt: null,
    comments: [
      { id: 'c6', author: 'Alice', content: 'Root cause: the event handler was not idempotent. Added deduplication key based on event_id + recipient. Fix deployed.', createdAt: daysAgo(3), isInternal: false },
      { id: 'c7', author: 'Bob', content: 'Verified fix. No duplicates in the last 48 hours. Moving to resolved.', createdAt: daysAgo(2), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-007', number: 1036, title: 'API rate limiting returns 500 instead of 429',
    description: 'When clients exceed the rate limit, the API returns HTTP 500 with a generic error instead of 429 Too Many Requests with proper Retry-After header.',
    status: 'closed', priority: 'medium', category: 'Bug',
    assignee: 'Bob', reporter: 'Dave',
    labels: ['api', 'rate-limiting'],
    createdAt: daysAgo(14), updatedAt: daysAgo(8), closedAt: daysAgo(8),
    comments: [
      { id: 'c8', author: 'Bob', content: 'Fixed. The rate limiter middleware was throwing an unhandled exception instead of returning a proper response. Added Retry-After header.', createdAt: daysAgo(9), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-008', number: 1035, title: 'Can we get a dark mode for the customer portal?',
    description: 'Multiple customers have requested dark mode support for the self-service portal. This would also help with accessibility compliance.',
    status: 'open', priority: 'low', category: 'Feature Request',
    assignee: null, reporter: 'Eve',
    labels: ['ui', 'portal', 'accessibility'],
    createdAt: daysAgo(12), updatedAt: daysAgo(12), closedAt: null,
    comments: [],
    attachments: [],
  },
  {
    id: 'tk-009', number: 1034, title: 'Export to PDF generates blank pages',
    description: 'When exporting reports to PDF, any page with charts renders as blank. Text-only pages work correctly. Likely a rendering engine issue with SVG-to-PDF conversion.',
    status: 'open', priority: 'medium', category: 'Bug',
    assignee: 'Carol', reporter: 'Alice',
    labels: ['export', 'pdf', 'charts'],
    createdAt: daysAgo(4), updatedAt: daysAgo(3), closedAt: null,
    comments: [
      { id: 'c9', author: 'Carol', content: 'Reproduced. The issue is with the SVG foreignObject elements. Looking at alternative rendering approaches.', createdAt: daysAgo(3), isInternal: false },
    ],
    attachments: ['blank-page-sample.pdf'],
  },
  {
    id: 'tk-010', number: 1033, title: 'What is the data retention policy for audit logs?',
    description: 'Customer needs to know how long audit logs are retained for SOC 2 compliance purposes. Also asks if logs can be exported to their own S3 bucket.',
    status: 'closed', priority: 'low', category: 'Question',
    assignee: 'Dave', reporter: 'Dave',
    labels: ['compliance', 'audit-logs'],
    createdAt: daysAgo(15), updatedAt: daysAgo(13), closedAt: daysAgo(13),
    comments: [
      { id: 'c10', author: 'Dave', content: 'Audit logs retained for 1 year (standard) or 3 years (enterprise). S3 export available via API. Sent documentation link to customer.', createdAt: daysAgo(13), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-011', number: 1032, title: 'Implement two-factor authentication for admin accounts',
    description: 'Security audit recommends enforcing 2FA for all admin-level accounts. Should support TOTP (Google Authenticator) and SMS fallback.',
    status: 'waiting', priority: 'critical', category: 'Feature Request',
    assignee: 'Alice', reporter: 'Bob',
    labels: ['security', '2fa', 'admin'],
    createdAt: daysAgo(6), updatedAt: daysAgo(2), closedAt: null,
    comments: [
      { id: 'c11', author: 'Alice', content: 'TOTP implementation complete. Waiting on the SMS provider API credentials from the infrastructure team.', createdAt: daysAgo(2), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-012', number: 1031, title: 'Search returns stale results after record update',
    description: 'After updating a contact record, the search index is not refreshed immediately. Users see old data in search for up to 5 minutes.',
    status: 'resolved', priority: 'medium', category: 'Bug',
    assignee: 'Bob', reporter: 'Carol',
    labels: ['search', 'elasticsearch', 'cache'],
    createdAt: daysAgo(8), updatedAt: daysAgo(4), closedAt: null,
    comments: [
      { id: 'c12', author: 'Bob', content: 'Changed ES refresh interval from 5m to 1s for the contacts index. Also added forced refresh on write operations. Fix deployed to staging.', createdAt: daysAgo(5), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-013', number: 1030, title: 'Add keyboard shortcuts for common actions',
    description: 'Power users request keyboard shortcuts: Ctrl+N (new record), Ctrl+S (save), Ctrl+/ (search), Ctrl+D (delete). Should be configurable.',
    status: 'open', priority: 'low', category: 'Feature Request',
    assignee: null, reporter: 'Eve',
    labels: ['ux', 'keyboard', 'accessibility'],
    createdAt: daysAgo(20), updatedAt: daysAgo(20), closedAt: null,
    comments: [],
    attachments: [],
  },
  {
    id: 'tk-014', number: 1029, title: 'Memory leak in real-time notification websocket',
    description: 'Browser memory usage grows steadily when the notifications panel is open. After 2 hours, the tab uses 1.5GB+ RAM. Suspect event listeners not being cleaned up on reconnect.',
    status: 'in_progress', priority: 'critical', category: 'Bug',
    assignee: 'Alice', reporter: 'Bob',
    labels: ['memory-leak', 'websocket', 'notifications'],
    createdAt: daysAgo(2), updatedAt: hoursAgo(8), closedAt: null,
    comments: [
      { id: 'c13', author: 'Alice', content: 'Found it. The reconnect logic was creating new listeners without removing old ones. Each reconnect added ~50 listeners. Patch ready for review.', createdAt: hoursAgo(8), isInternal: false },
    ],
    attachments: ['heap-snapshot.json'],
  },
  {
    id: 'tk-015', number: 1028, title: 'Invoice PDF missing company logo on page 2+',
    description: 'Multi-page invoices only show the company logo on the first page. Customers expect consistent branding on all pages.',
    status: 'closed', priority: 'low', category: 'Bug',
    assignee: 'Carol', reporter: 'Dave',
    labels: ['invoices', 'pdf', 'branding'],
    createdAt: daysAgo(18), updatedAt: daysAgo(12), closedAt: daysAgo(12),
    comments: [
      { id: 'c14', author: 'Carol', content: 'Logo was only included in the header template for page 1. Updated the running header to include it on all pages.', createdAt: daysAgo(13), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-016', number: 1027, title: 'Integrate with Salesforce CRM',
    description: 'Top-requested integration. Need bidirectional sync for contacts, companies, and deals. OAuth 2.0 connection flow. Should support both Salesforce Classic and Lightning.',
    status: 'open', priority: 'high', category: 'Feature Request',
    assignee: 'Carol', reporter: 'Alice',
    labels: ['integration', 'salesforce', 'crm'],
    createdAt: daysAgo(9), updatedAt: daysAgo(5), closedAt: null,
    comments: [
      { id: 'c15', author: 'Carol', content: 'Started spike on Salesforce REST API. OAuth flow prototype works. Need to design the field mapping schema next.', createdAt: daysAgo(5), isInternal: true },
    ],
    attachments: ['salesforce-api-notes.md'],
  },
  {
    id: 'tk-017', number: 1026, title: 'Timezone conversion wrong for Australia/Lord_Howe',
    description: 'Lord Howe Island has a +30 minute offset DST transition (unique worldwide). Our timezone conversion library handles it incorrectly, showing events 30 minutes off.',
    status: 'waiting', priority: 'low', category: 'Bug',
    assignee: 'Dave', reporter: 'Eve',
    labels: ['timezone', 'i18n', 'edge-case'],
    createdAt: daysAgo(11), updatedAt: daysAgo(6), closedAt: null,
    comments: [
      { id: 'c16', author: 'Dave', content: 'Confirmed. Our tz library is outdated (2023c). Upgrade to latest IANA data should fix it. Waiting for approval to update the dependency.', createdAt: daysAgo(6), isInternal: false },
    ],
    attachments: [],
  },
  {
    id: 'tk-018', number: 1025, title: 'Mobile responsive layout for ticket management',
    description: 'The ticket management interface is not usable on tablets or phones. Need responsive breakpoints for the 3-panel layout: collapse sidebar on tablet, stack panels on phone.',
    status: 'open', priority: 'medium', category: 'Feature Request',
    assignee: null, reporter: 'Bob',
    labels: ['mobile', 'responsive', 'ui'],
    createdAt: daysAgo(16), updatedAt: daysAgo(16), closedAt: null,
    comments: [],
    attachments: ['mobile-mockup.png'],
  },
];
